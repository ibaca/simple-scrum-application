<?xml version="1.0" encoding="ISO-8859-1" ?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    template="/template.xhtml">

    <ui:define name="content">
		<h1>Sprint Backlog <small>Listado de sprints del proyecto</small></h1>
        <div class="row">
            <div class="span8">
                <h:form>
                    <p>
                        <p:dataTable value="#{sprintManager.sprints}" var="sprint" paginator="true" paginatorPosition="bottom" rows="14" emptyMessage="No hay ningun sprint asociado al proyecto actual">
							<p:column>
                                <f:facet name="header">
                                    <h:outputText value="id" />
                                </f:facet>
                                <h:outputText value="#{sprint.id}" />
                            </p:column>
							<p:column>
                                <f:facet name="header">
                                    <h:outputText value="Tasks"/>
                                </f:facet>
                                <h:outputText value="#{sprint.tasks.size()}"/>
                            </p:column>
                            <p:column sortBy="#{sprint.created}">
                                <f:facet name="header">
                                    <h:outputText value="Created" />
                                </f:facet>
                                <h:outputText value="#{sprint.created}" >
                                    <f:convertDateTime pattern="d/M/yyyy"/>
                                </h:outputText>

                            </p:column>
                            <p:column sortBy="#{sprint.beginDate}">
                                <f:facet name="header">
                                    <h:outputText value="Start" />
                                </f:facet>
                                <h:outputText value="#{sprint.beginDate}" >
                                    <f:convertDateTime pattern="d/M/yyyy"/>
                                </h:outputText>
                            </p:column>
                            <p:column sortBy="#{sprint.endDate}">
                                <f:facet name="header">
                                    <h:outputText value="Finish" />
                                </f:facet>
                                <h:outputText value="#{sprint.endDate}" >
                                    <f:convertDateTime pattern="d/M/yyyy"/>
                                </h:outputText>
                            </p:column>
							<p:column >
                                <f:facet name="header">
                                    <h:outputText value="Summary" />
                                </f:facet>
                                <h:commandLink value="#{sprint.summary}" action="#{sprintManager.edit}" />
                            </p:column>
                        </p:dataTable>
                    </p>
                    <p>
                        <p:commandButton  action="#{sprintManager.create}" value="New Sprint" styleClass="btn" update="@form"/>
                    </p>
                </h:form>
            </div>

            <div class="span4">
                <h3>Estad&iacute;stico de tareas </h3>
                <p> En el gr&aacute;fico circular representa de forma porcentual y absoluta el 
                    n&uacute;mero de tareas, contenidas en el proyecto <code> #{projectManager.currentProject.name}</code>
                    , agrupadas seg&uacute;n su estado
                </p>
                <h:form>
<!--                    <p:pieChart id="sample" value="#{statisticsBean.pieTaskModel}" legendPosition="w"  
                                title="Estado de las tareas" style="width:400px;height:300px" />-->
                </h:form>

            </div>
        </div>
    </ui:define>
</ui:composition>
