<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//h3D XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/h3D/xhtml1-transitional.h3d">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
				xmlns:h="http://java.sun.com/jsf/html"
				xmlns:p="http://primefaces.org/ui"
				xmlns:f="http://java.sun.com/jsf/core"
				xmlns:ui="http://java.sun.com/jsf/facelets"
				xmlns:c="http://java.sun.com/jsp/jstl/core"
				xmlns:ssa="http://java.sun.com/jsf/composite/partials"
				template="/template.xhtml">
	<ui:define name="content">
		<div class="row">
			<div class="span3">
				<ssa:project_menu/>
			</div>

			<div class="span9">
				<h:form>  
					<h1>#{projectManager.currentProject.name} <small>#{projectManager.currentProject.summary}</small></h1>
					<p>
                                            <div class="thumbnail">
                                                    <div id="statistcSelect" class="dropdown" style="float:right">
                                                        <a class="dropdown-toggle" data-toggle="dropdown" href="#statistcSelect">Estad&iacute;sticos<b class="caret"></b></a>
                                                            <ul class="dropdown-menu">
                                                                    <li><h:commandLink value="Stress Model" actionListener="#{projectManager.setStatistcs(0)}" /></li>
                                                                    <li><h:commandLink value="Task Model" actionListener="#{projectManager.setStatistcs(1)}" /></li>
                                                                    <li><h:commandLink value="Individual Model" actionListener="#{projectManager.setStatistcs(2)}" /></li>                                                                    
                                                            </ul>
                                                            <!-- al ser asincrono no inicializa el dropdown -->
                                                            <script>$('.dropdown-toggle').dropdown()</script>
                                                    </div>
                                                    <c:choose>
                                                            <c:when test="#{projectManager.statistcs==0}">
                                                                    <p:barChart id="basic" value="#{statisticsBean.stressModel}" legendPosition="ne"  
                                                                        title="Stress Model" min="0" max="50" 
                                                                        style="width:500px;height:300px;"/>
                                                            </c:when>
                                                            <c:when test="#{projectManager.statistcs==1}">
                                                                <p:barChart id="basic" value="#{statisticsBean.taskModel}" legendPosition="ne"  
                                                                        title="Task Model" min="0" max="50" 
                                                                        style="width:500px;height:300px;"/>
                                                            </c:when>
                                                            <c:otherwise>
                                                                <p:barChart id="basic" value="#{statisticsBean.individualModel}" legendPosition="ne"  
                                                                        title="Individual Model" min="0" max="50" 
                                                                        style="width:500px;height:300px;"/>
                                                            </c:otherwise>
                                                    </c:choose>   
                                            </div>

<!--						<div class="thumbnail"><img src="http://upload.wikimedia.org/wikipedia/commons/5/59/EjemploDeDiagramaBurnDown.png" /></div>-->
					</p>

					<h:outputText escape="false" value="#{projectManager.currentProject.description}"/>

				</h:form>  
			</div>
		</div>
	</ui:define>
</ui:composition>
